<div id="apps-info-wrapper">
  <div class="modal-card">
    <div class="modal-content">
      <!-- Header -->
      <div class="modal-header">
        <h3 class="nalej-form-title">{{title}}</h3>
      </div>
      <!-- Body -->
      <div class="modal-body">
        <h3 class="services-title">Services</h3>
        <!-- Service Graph -->
        <div class="graph">
          <div  class="graph-click-fix"></div>
            <ngx-graph
              class="chart-container"
              [view]="view"
              [legend]="showLegend"
              [links]="graphData.links"
              [nodes]="graphData.nodes"
              [scheme]="colorScheme"
              [orientation]="orientation"
              [autoZoom]="autoZoom"
              [autoCenter]="autoCenter"
              [curve]="curve"
              [enableZoom]="enableZoom">
            <ng-template #nodeTemplate let-node>
              <svg:g 
                class="node"
              >
                <svg:rect 
                [attr.width]="node.width" 
                [attr.height]="node.height" 
                [attr.fill]="node.options.color" 
                rx="14" 
                ry="14"/>
                <svg:text 
                  alignment-baseline="central" 
                  [attr.x]="10" 
                  [attr.y]="node.height / 2">
                  {{node.label}}
              </svg:text>
              </svg:g>
            </ng-template>
            <ng-template #linkTemplate let-link>
              <svg:g class="edge">
                <svg:path
                  class="line"
                  d="M 0,30 h100"
                  >
                </svg:path>
              </svg:g>
            </ng-template>
          </ngx-graph>
        </div>
        <!-- Deployed app table -->
        <div id="scrolltable">
            <!-- *ngIf="loadedData && instance && instance.length > 0"  -->
          <table class="table app-summary" >
            <tr>
              <th class="grey">
                Name
              </th>
              <td>{{instance.name}}</td>
            </tr>
            <tr>
              <th class="grey">
                Instance Id
              </th>
              <td>{{instance.app_instance_id}}</td>
            </tr>
            <tr>
              <th class="grey">
                Descriptor Id
              </th>
              <td>{{instance.app_descriptor_id}}</td> 
            </tr>
            <tr>
              <th class="grey">
                Description
              </th>
              <td>{{instance.description}}</td> 
            </tr>
            <tr>
              <th class="grey">
                Configuration Options
              </th>
              <td *ngFor="let option of objectToString(instance.configuration_options)">
                {{option[0]}}: {{option[1]}}</td>
            </tr>
            <tr>
              <th class="grey">
                Environment Variables
              </th>
              <td *ngFor="let variable of objectToString(instance.environment_variables)">
                  {{variable[0]}}: {{variable[1]}}
              </td>
              <br>         
            </tr>
            <tr>
              <th class="grey">
                Tags
              </th>

             
              <td *ngFor="let label of objectToString(instance.labels)">
                {{label[0]}}: {{label[1]}}</td>
            </tr>



            <tr>
              <th class="grey">
                Rules
              </th>
              <td *ngFor="let rule of instance.rules">
                <p *ngFor="let field of objectToString(rule)">
                    {{field[0]}}: {{field[1]}}
                </p>
                <br>
              </td>
            </tr>
<!-- TODO -->
            <tr>
              <th class="grey">
                Rules
              </th>
              <td *ngFor="let rule of instance.rules">
                <p>
                    ID: {{rule.rule_id}}
                </p>
                <br>
              </td>
            </tr>



            <tr>
              <th class="grey">
                Groups
              </th>
              <td>{{instance.groups}}</td> 
            </tr>
            <tr>
              <th class="grey">
                Services
              </th>
              <td>{{instance.services}}</td>
            </tr>
            <tr>
              <th class="grey">
                Status
              </th>
              <td>{{instance.status_name}}</td>
            </tr>
          </table>
          <!-- <div  *ngIf="loadedData && instance.length === 0"
            class="no-apps d-flex justify-content-center align-items-center">
              No available applications detected
          </div> -->
          <!-- Loader -->

          <!-- <div class="nalej-loader-container" *ngIf="!loadedData">
            <div class="loader">
              <svg 
                class="circular" 
                viewBox="25 25 50 50">
                <circle 
                  class="path" 
                  cx="50" 
                  cy="50" 
                  r="20" 
                  fill="none" 
                  stroke-width="2" 
                  stroke-miterlimit="10"/>
              </svg>
            </div>
          </div> -->

        </div>
      <!-- Option button -->
      <div class="buttons d-flex flex-row justify-content-center">
        <button class="btn btn-primary btn-lg" (click)="bsModalRef.hide()">
          <span class="align-bottom">Close</span>
        </button>
      </div>
      </div>
    </div>
  </div>
</div>


